<hcl-panel class="title-panel">{{ 'events.title' | hclTranslate }}</hcl-panel>

<app-events-filter-panel (filterEvent)="setFilterParameters($event)" (clearEvent)="setFilterParameters()"></app-events-filter-panel>

<table hcl-table [hcl-data]='data' [hcl-displayed-columns]='displayedColumns' (hcl-sort-changed)="onSortChange($event)" hcl-sort>

  <ng-container hcl-table-column-def="timestamp">
    <th hcl-table-header-cell *hcl-table-header-cell-def hcl-sort-header >{{ 'events.table.date' | hclTranslate }} </th>
    <td hcl-table-cell *hcl-table-cell-def="let _element" >
      @if (assertDataType(_element);as element) {
        {{ element.timestamp | date: 'HH:mm:ss dd.MM.yyyy'}}
      }
    </td>
  </ng-container>

  <ng-container hcl-table-column-def="apikey">
    <th hcl-table-header-cell *hcl-table-header-cell-def hcl-sort-header >{{ 'events.table.apikey' | hclTranslate }} </th>
    <td hcl-table-cell *hcl-table-cell-def="let _element" >
      @if (assertDataType(_element);as element) {
        {{ element.apikey | hclTranslate }}
      }
    </td>
  </ng-container>

  <ng-container hcl-table-column-def="eventtype">
    <th hcl-table-header-cell *hcl-table-header-cell-def hcl-sort-header >{{ 'events.table.eventtype' | hclTranslate }} </th>
    <td hcl-table-cell *hcl-table-cell-def="let _element" >
      @if (assertDataType(_element);as element) {
        {{ 'events.table.events.' + element.eventtype | hclTranslate }}
      }
    </td>
    <td hcl-table-footer-cell *hcl-table-footer-cell-def [colSpan]='displayedColumns.length'>
      <hcl-paginator [hcl-item-length]=dataLength (hcl-page-event)='onPageChange($event)' [hcl-page-size]=userPaginatorDefault></hcl-paginator>
    </td>
  </ng-container>

  <ng-container hcl-table-column-def="service">
    <th hcl-table-header-cell *hcl-table-header-cell-def hcl-sort-header >{{ 'events.table.service' | hclTranslate }} </th>
    <td hcl-table-cell *hcl-table-cell-def="let _element" >
      @if (assertDataType(_element);as element) {
        {{  element.service | hclTranslate }}
      }
    </td>
  </ng-container>

  <ng-container hcl-table-column-def="timeunit">
    <th hcl-table-header-cell *hcl-table-header-cell-def>{{ 'events.table.timeunit' | hclTranslate }} </th>
    <td hcl-table-cell *hcl-table-cell-def="let _element">
      @if (assertDataType(_element);as element) {
        {{ 'events.table.timeunits.' + element.timeunit | hclTranslate }}
      }
    </td>
  </ng-container>

  <ng-container hcl-table-column-def="quota">
    <th hcl-table-header-cell *hcl-table-header-cell-def>{{ 'events.table.quota' | hclTranslate }} </th>
    <td hcl-table-cell *hcl-table-cell-def="let _element" >
      @if (assertDataType(_element);as element) {
        {{ element.quota }}
      }
    </td>
  </ng-container>

  <ng-container hcl-table-column-def="requests">
    <th hcl-table-header-cell *hcl-table-header-cell-def>{{ 'events.table.requests' | hclTranslate }} </th>
    <td hcl-table-cell *hcl-table-cell-def="let _element" >
      @if (assertDataType(_element);as element) {
        {{ element.requests }}
      }
    </td>
  </ng-container>

  <tr hcl-table-no-data-row *hcl-table-no-data-row-def>
    <td hcl-table-no-data-cell [colSpan]='displayedColumns.length'>
      <hcl-icon [hcl-icon-inline]='true' hcl-icon='mat::cancel'></hcl-icon>{{ 'system-logs.table.empty' | hclTranslate }}
    </td>
  </tr>

  <tr hcl-table-header-row *hcl-table-header-row-def></tr>
  <tr hcl-table-row *hcl-table-row-def></tr>
  <tr hcl-table-footer-row *hcl-table-footer-row-def></tr>

</table>

