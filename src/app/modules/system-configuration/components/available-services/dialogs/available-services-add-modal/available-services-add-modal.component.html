<hcl-modal-dialog #addServiceModal>

  <hcl-dialog-header>
    {{ 'available-services.modals.add.title' | hclTranslate }}
  </hcl-dialog-header>

  <hcl-dialog-body>
    <form [formGroup]="form" class="add-service-form">

      <div class="service-form">
        <hcl-form-input class="text-input">
          <input maxlength="50" hcl-input type='text' formControlName="key">
          <hcl-label>{{ 'available-services.modals.form.key' | hclTranslate }}</hcl-label>
        </hcl-form-input>
      </div>

      <div class="divider">
        <hr>
        <span>{{ 'available-services.modals.form.translations' | hclTranslate }}</span>
      </div>

      <div formArrayName="translations">
        <div *ngFor="let translation of translations.controls; let i = index" [formGroupName]="i" class="service-form">
          <hcl-form-input class="text-input">
            <input maxlength="50" hcl-input type='text' formControlName="locale">
            <hcl-label>{{ 'available-services.modals.form.locale' | hclTranslate }}</hcl-label>
          </hcl-form-input>
          <hcl-form-input class="text-input">
            <input maxlength="50" hcl-input type='text' formControlName="description">
            <hcl-label>{{ 'available-services.modals.form.value' | hclTranslate }}</hcl-label>
          </hcl-form-input>
          <button type="button" hcl-button hcl-color="accent"  class="remove-translation-button" (click)="removeTranslation(i)">
            {{ 'available-services.modals.buttons.removeTranslation' | hclTranslate }}
          </button>
        </div>
      </div>

      <button type="button" hcl-button hcl-color="primary" class="add-translation-button" (click)="addTranslation()" style="width: 100%">
        {{ 'available-services.modals.buttons.addTranslation' | hclTranslate }}
      </button>

      <div *ngIf="form.controls['translations'].errors?.['missingRequiredTranslations']" class="error-message">
        <i hcl-icon='mat::error'></i>{{ 'available-services.modals.form.missingRequiredTranslations' | hclTranslate }}
      </div>

    </form>
  </hcl-dialog-body>

  <hcl-dialog-footer>
    <button hcl-button type='button' hcl-color="primary" (click)='onSave()'>
      {{ 'available-services.modals.buttons.save' | hclTranslate }}
    </button>
    <button hcl-button type='button' (click)='this.addServiceModal.cancel()' class="cancel-button">
      {{ 'available-services.modals.buttons.close' | hclTranslate }}
    </button>
  </hcl-dialog-footer>

</hcl-modal-dialog>

